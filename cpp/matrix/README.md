# P1-matrix-multiplication
Provides operations for (2D) matrices.

## Libraries
[matplotlib-cpp](https://github.com/lava/matplotlib-cpp) - Used to plot the generated data.

## Perf tests & Plotting data
[matplotlib-cpp](https://github.com/lava/matplotlib-cpp) requires some additional python and numpy packages to be installed before compiling. In case the building fails, check out the README of the library for details about these.

Define or comment out the various directives specified in Main.cpp to choose between running the performance tests, plotting the data or normal execution.

When running the performance tests you can pass one argument that sets the amount of worker threads to use.

## Requirements
- cmake 3.16+
- C++17 compiler and build tools

## Build & Run
Default build target is set to Release.
```console
foo@bar:$ cmake -S. -B build/release
foo@bar:$ cmake --build build/release [-- VERBOSE=1]
foo@bar:$ ./bin/Matrixer
foo@bar:$ ./bin/Matrixer 2 # Set worker threads count to 2 (only when perf testing)

foo@bar:$ cmake -DCMAKE_BUILD_TYPE=Debug -S. -B build/debug
foo@bar:$ cmake --build build/debug [-- VERBOSE=1]
foo@bar:$ ./bin/Matrixer-dbg
```

## Tests
- Build with type set to Debug
- Generate test matrices into `test/data/` (requires python3 & numpy).
- Run tests
```console
foo@bar:$ cd test/
foo@bar:/test$ ./generate-test-matrices.py
foo@bar:$ ./bin/TestMatrix
```

### Sample run
Debug target with verbose printing:
```console
foo@bar:$ ./bin/Matrixer[-dbg]
Identity matrices with diagonal sizes in [1,3] and with types in [float,double,int]:
| RowMajor Matrix of height X width: 1X1 |
| RAW: [ 1.000000, ] |
|-----------|
|  1.000000 |
|-----------|
| RowMajor Matrix of height X width: 1X1 |
| RAW: [ 1.000000, ] |
|-----------|
|  1.000000 |
|-----------|
| RowMajor Matrix of height X width: 1X1 |
| RAW: [ 1, ] |
|-----------|
|         1 |
|-----------|

| RowMajor Matrix of height X width: 2X2 |
| RAW: [ 1.000000, 0.000000, 0.000000, 1.000000, ] |
|---------------------|
|  1.000000  0.000000 |
|  0.000000  1.000000 |
|---------------------|
| RowMajor Matrix of height X width: 2X2 |
| RAW: [ 1.000000, 0.000000, 0.000000, 1.000000, ] |
|---------------------|
|  1.000000  0.000000 |
|  0.000000  1.000000 |
|---------------------|
| RowMajor Matrix of height X width: 2X2 |
| RAW: [ 1, 0, 0, 1, ] |
|---------------------|
|         1         0 |
|         0         1 |
|---------------------|

| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, ] |
|-------------------------------|
|  1.000000  0.000000  0.000000 |
|  0.000000  1.000000  0.000000 |
|  0.000000  0.000000  1.000000 |
|-------------------------------|
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, ] |
|-------------------------------|
|  1.000000  0.000000  0.000000 |
|  0.000000  1.000000  0.000000 |
|  0.000000  0.000000  1.000000 |
|-------------------------------|
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1, 0, 0, 0, 1, 0, 0, 0, 1, ] |
|-------------------------------|
|         1         0         0 |
|         0         1         0 |
|         0         0         1 |
|-------------------------------|

Matrices with float type and multiplications of them:
ID:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000, 0.000000, 1.000000, ] |
|-------------------------------|
|  1.000000  0.000000  0.000000 |
|  0.000000  1.000000  0.000000 |
|  0.000000  0.000000  1.000000 |
|-------------------------------|
A:
| RowMajor Matrix of height X width: 2X3 |
| RAW: [ 0.100000, 0.200000, 0.300000, 0.400000, 0.500000, 0.600000, ] |
|-------------------------------|
|  0.100000  0.200000  0.300000 |
|  0.400000  0.500000  0.600000 |
|-------------------------------|
B:
| ColMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 4.000000, 7.000000, 2.000000, 5.000000, 8.000000, 3.000000, 6.000000, 9.000000, ] |
|-------------------------------|
|  1.000000  2.000000  3.000000 |
|  4.000000  5.000000  6.000000 |
|  7.000000  8.000000  9.000000 |
|-------------------------------|
A*ID:
| RowMajor Matrix of height X width: 2X3 |
| RAW: [ 0.100000, 0.200000, 0.300000, 0.400000, 0.500000, 0.600000, ] |
|-------------------------------|
|  0.100000  0.200000  0.300000 |
|  0.400000  0.500000  0.600000 |
|-------------------------------|
B*ID:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 2.000000, 3.000000, 4.000000, 5.000000, 6.000000, 7.000000, 8.000000, 9.000000, ] |
|-------------------------------|
|  1.000000  2.000000  3.000000 |
|  4.000000  5.000000  6.000000 |
|  7.000000  8.000000  9.000000 |
|-------------------------------|
ID*B:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 1.000000, 2.000000, 3.000000, 4.000000, 5.000000, 6.000000, 7.000000, 8.000000, 9.000000, ] |
|-------------------------------|
|  1.000000  2.000000  3.000000 |
|  4.000000  5.000000  6.000000 |
|  7.000000  8.000000  9.000000 |
|-------------------------------|
A * B:
| RowMajor Matrix of height X width: 2X3 |
| RAW: [ 3.000000, 3.600000, 4.200000, 6.600000, 8.100000, 9.600000, ] |
|-------------------------------|
|  3.000000  3.600000  4.200000 |
|  6.600000  8.100000  9.600000 |
|-------------------------------|
B^2:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 30.000000, 36.000000, 42.000000, 66.000000, 81.000000, 96.000000, 102.000000, 126.000000, 150.000000, ] |
|-------------------------------|
| 30.000000 36.000000 42.000000 |
| 66.000000 81.000000 96.000000 |
| 102.000000 126.000000 150.000000 |
|-------------------------------|
B^2 + B:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 31.000000, 38.000000, 45.000000, 70.000000, 86.000000, 102.000000, 109.000000, 134.000000, 159.000000, ] |
|-------------------------------|
| 31.000000 38.000000 45.000000 |
| 70.000000 86.000000 102.000000 |
| 109.000000 134.000000 159.000000 |
|-------------------------------|
B^2 - B:
| RowMajor Matrix of height X width: 3X3 |
| RAW: [ 29.000000, 34.000000, 39.000000, 62.000000, 76.000000, 90.000000, 95.000000, 118.000000, 141.000000, ] |
|-------------------------------|
| 29.000000 34.000000 39.000000 |
| 62.000000 76.000000 90.000000 |
| 95.000000 118.000000 141.000000 |
|-------------------------------|
B-B:
| ColMajor Matrix of height X width: 3X3 |
| RAW: [ 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, ] |
|-------------------------------|
|  0.000000  0.000000  0.000000 |
|  0.000000  0.000000  0.000000 |
|  0.000000  0.000000  0.000000 |
|-------------------------------|
Randomly generated matrices:
R1, float vals in [0,1]:
| ColMajor Matrix of height X width: 2X2 |
| RAW: [ 0.765989, 0.068634, 0.045961, 0.582422, ] |
|---------------------|
|  0.765989  0.045961 |
|  0.068634  0.582422 |
|---------------------|
R2, double vals in [10.0, 10.5]:
| RowMajor Matrix of height X width: 5X10 |
| RAW: [ size > 50 => raw data not printed ] |
|-----------------------------------------------------------------------------------------------------|
| 10.407311 10.321537 10.424454 10.303133 10.034204 10.043163 10.028048 10.393132 10.384828 10.049271 |
| 10.360648 10.360910 10.477787 10.234007 10.252048 10.107676 10.127169 10.090940 10.278533 10.085827 |
| 10.447947 10.358747 10.066639 10.213597 10.032042 10.199292 10.009758 10.021474 10.068996 10.023276 |
| 10.032669 10.474015 10.154341 10.196882 10.200083 10.211853 10.357510 10.372456 10.324088 10.046505 |
| 10.354600 10.379107 10.377920 10.087247 10.004944 10.150112 10.070250 10.022921 10.432444 10.028134 |
|-----------------------------------------------------------------------------------------------------|
R3, int vals in [0,1]:
| ColMajor Matrix of height X width: 7X3 |
| RAW: [ 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, ] |
|-------------------------------|
|         1         1         0 |
|         1         1         1 |
|         1         0         0 |
|         1         0         1 |
|         0         1         0 |
|         1         0         0 |
|         0         0         0 |
|-------------------------------|
R3_(5,2): 0
```
